version: '3.8'
services:
  frontend:
    container_name: e-register-frontend
    build: ./e-register-frontend
    command: npm run dev
    ports:
      - "4000:3000"
    volumes:
      - ./e-register-frontend:/e-register-frontend
      - /e-register-frontend/node_modules
  backend:
    container_name: e-register-backend
    build: ./e-register-backend
    command: npm run start:dev
    depends_on:
      - mongodb
    ports:
      - "8000:3000"
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - HOST=${HOST}
      - PORT=${PORT}
      - SECURE=${SECURE}
      - EMAIL=${EMAIL}
      - PASSWORD=${PASSWORD}
      - NO_REPLY=${NO_REPLY}
      - SECRET=${SECRET}
      - SALT=${SALT}
      - FIRST_NAME=${FIRST_NAME}
      - MIDDLE_NAME=${MIDDLE_NAME}
      - LAST_NAME=${LAST_NAME}
      - ADMIN_EMAIL=${ADMIN_EMAIL}
      - PHONE_NUMBER=${PHONE_NUMBER}
    volumes:
      - ./e-register-backend:/e-register-backend
      - /e-register-backend/node_modules
  mongodb:
    image : mongo:latest
    container_name: mongodb
    volumes:
      - ./database:/data/db
    ports:
      - 27017:27017
   
